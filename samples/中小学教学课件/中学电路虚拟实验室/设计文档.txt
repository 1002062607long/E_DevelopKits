                    《中学电路虚拟实验室》设计文档


一、目标

   模拟中学生能想象得到的任意结构的单电源串并联电路试验

二、方法：

   1.实验元件图片准备： 图片来自网络图片截图加工成77×68像素大小。用Photoshop测出每个元件接线柱的像素坐标。

   2.画图方法： 元件图片画在底层画板，画线画在上层画板，然后复制到底层画板。

   3.显示元件效果： 通过在同一位置以指定速度更换图片来显示动画效果。

   4.如何记录操作： 主要是把每次操作的所有信息用“编码”的方式分段记录到“过程操作文本”中。
   元件信息样式为：“№ 当前元件编号□元件横位■元件纵位◇元件名称◆元件类别△元件状态▲元件电压◎元件电阻○最小电阻●最大电阻☆额定电压★额定电流‖
   画线路径信息样式：⊙首接头名|尾接头名¤ ┇横坐标|纵坐标┇横坐标|纵坐标┇……┇横坐标|纵坐标‖
   元件左侧或正极接线柱命名样式：元件名称 ＋ “∧”   右侧或负极接线柱命名样式：元件名称 ＋ “∨”

   5.删除元件或导线： 找到记录此元件的信息文本和与之相连的导线信息文本，删除，重画剩余元件和导线，并重新电路分析指定试验效果。

   6.移动元件  根据鼠标位置重新定义元件的横坐标和纵坐标，并根据鼠标移动距离由近到远地重新定义导线各点的坐标，鼠标移动时在画板上重画所有元件和导线，即能显示元件和导线移动效果。

   7.电路分析方法： 

    a、如何判断元件的串并联，经过艰苦分析，找到用于判断串并联的关键特征：串联――元件一端接头只跟一个元件一端接头相连；并联――元件两端都分别相连。

    b、如何分析电路，先把电阻为零的闭合开关、电阻为零的变阻器、电流器忽略（即把它们两端相连的元件设为直接导线连接），把相当于断开的开关或电压器从电路中删除；然后把串联的元件以二合一方法把两个电阻元件合成为一个拟电阻体，并记录下拟电阻体内部元件的方向、位置及电阻构成，样式：元件A外侧接头名 &元件A电阻―元件B外侧接头名（注：元件相连的接头为内侧接头）。重复上述操作直到找不到串联的电阻元件为止。接着把并联的元件以二合一方法把两个电阻元件合成为一个拟电阻体，并记录下拟电阻体内部构成，样式：元件A某端接头名 | 与元件A某端接头相连的元件B接头名。重复上述操作直到找不到并联电阻为止。反复―串联―并联合成，其间把一端游离的元件或拟电阻体删除，最终精简到只剩下一个拟电阻体和电源。然后根据拟电阻体的两端电压和内部结构，把电压和电流按欧姆定律分别指定到拟电阻体内元件上。逐一分解，直到算出所有有效电路中元件的两端电势和元件电流，最后生成一“分析报告”文本。样式为：“元件名称 @正极电势@负极电势 @电流大小”这样的文本串。最后按“分析报告”指定电灯、电动机、电表的视觉效果。其中电压器效果是根据电压器两端元件电势之差（电压）来判断效果的。电流器如果与元件串联，则电流器的电流就是串联元件的电流，如果电流器一端与多个元件相连，则电流等于流向电流表的电流减去离开电流表方向的电流。

   c、如何判断有纯电阻“桥式电路”等复杂结构的电路。这些结构的电路都不能以串联合并和并联合并的方法最终合并成一个拟电阻。所以通过很多次串并联合并仍无法合成最终一个拟电阻时，可以断定电路中有除串并联电路以外的复杂电路结构。

   8.电路文件的保存与打开： 把所有操作信息编码文本以字节集方式写到文件完成对电路信息的保存。打开则把含有操作信息的电路文件还原成操作信息编码文本,从中读取操作记录并原样顺序重新操作。这样就可以还原上次实验。

     根据以上思路实现本程序，具体细节很繁杂,这里难以一一描述。

